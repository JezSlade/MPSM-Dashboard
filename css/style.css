/*
 * MPSM Dashboard - Main Stylesheet
 *
 * This file defines the visual styles for the entire MPSM Dashboard.
 * It includes base styles, layout definitions, component styling, and theme variables
 * for dark/light mode and CMYK highlights.
 *
 * Glassmorphism: Achieved using `backdrop-filter: blur()`, `rgba` colors, and subtle borders.
 * CMYK Highlights: Defined as CSS variables for easy modification and theme switching.
 */

/* --- CSS Variables for Theming --- */
:root {
    /* Base Colors - Dark Theme (Default) */
    --bg-primary-dark: #1a1a1a;        /* Dark background */
    --bg-secondary-dark: #2a2a2a;      /* Slightly lighter dark background for elements */
    --text-primary-dark: #e0e0e0;      /* Light text */
    --text-secondary-dark: #a0a0a0;    /* Grey text */
    --border-color-dark: rgba(255, 255, 255, 0.1); /* Subtle white border for glassmorphism */
    --glass-bg-dark: rgba(42, 42, 42, 0.6); /* Glassmorphic background */
    --glass-shadow-dark: rgba(0, 0, 0, 0.3); /* Shadow for glassmorphism */

    /* Base Colors - Light Theme */
    --bg-primary-light: #f0f0f0;       /* Light background */
    --bg-secondary-light: #ffffff;     /* White background for elements */
    --text-primary-light: #333333;     /* Dark text */
    --text-secondary-light: #666666;   /* Grey text */
    --border-color-light: rgba(0, 0, 0, 0.1); /* Subtle black border for glassmorphism */
    --glass-bg-light: rgba(255, 255, 255, 0.6); /* Glassmorphic background */
    --glass-shadow-light: rgba(0, 0, 0, 0.1); /* Shadow for glassmorphism */

    /* CMYK Highlight Colors */
    --highlight-cyan: #00bcd4;         /* Cyan */
    --highlight-magenta: #e91e63;      /* Magenta */
    --highlight-yellow: #ffeb3b;       /* Yellow */
    --highlight-key: #212121;          /* Key (Black - used for subtle elements) */

    /* Glassmorphism Properties */
    --glass-blur: 10px;
    --glass-border-width: 1px;
    --glass-border-radius: 12px;

    /* Transition for theme switching */
    --theme-transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, backdrop-filter 0.3s ease;
}

/* --- Theme Specific Variables (Managed by JavaScript) --- */
body.theme-dark {
    --bg-primary: var(--bg-primary-dark);
    --bg-secondary: var(--bg-secondary-dark);
    --text-primary: var(--text-primary-dark);
    --text-secondary: var(--text-secondary-dark);
    --border-color: var(--border-color-dark);
    --glass-bg: var(--glass-bg-dark);
    --glass-shadow: var(--glass-shadow-dark);
}

body.theme-light {
    --bg-primary: var(--bg-primary-light);
    --bg-secondary: var(--bg-secondary-light);
    --text-primary: var(--text-primary-light);
    --text-secondary: var(--text-secondary-light);
    --border-color: var(--border-color-light);
    --glass-bg: var(--glass-bg-light);
    --glass-shadow: var(--glass-shadow-light);
}

/* --- Global Reset and Base Styles --- */
*, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--bg-primary);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: var(--theme-transition);
}

a {
    color: var(--highlight-cyan);
    text-decoration: none;
    transition: color 0.2s ease;
}

a:hover {
    color: var(--highlight-magenta);
}

button, input[type="submit"], .button {
    background-color: var(--highlight-cyan);
    color: var(--bg-secondary-dark); /* Dark text on highlight */
    border: none;
    padding: 10px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.2s ease, transform 0.1s ease;
}

button:hover, input[type="submit"]:hover, .button:hover {
    background-color: var(--highlight-magenta);
    transform: translateY(-2px);
}

button:active, input[type="submit"]:active, .button:active {
    transform: translateY(0);
}

input[type="text"], input[type="search"], select, textarea {
    padding: 10px;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    font-size: 1rem;
    transition: border-color 0.2s ease, background-color 0.2s ease;
}

input[type="text"]:focus, input[type="search"]:focus, select:focus, textarea:focus {
    outline: none;
    border-color: var(--highlight-cyan);
    box-shadow: 0 0 0 2px rgba(var(--highlight-cyan), 0.2); /* Soft glow */
}

/* --- Glassmorphic Effect Base Class --- */
.glassmorphic {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border-width) solid var(--border-color);
    border-radius: var(--glass-border-radius);
    box-shadow: 0 4px 30px var(--glass-shadow);
    transition: var(--theme-transition);
}

/* --- Layout Structure --- */
.dashboard-header {
    width: 100%;
    padding: 20px 40px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    z-index: 1000; /* Ensure header is on top */
    margin-bottom: 20px;
    position: sticky;
    top: 0;
}

.header-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.app-branding h1 {
    font-size: 2.2rem;
    color: var(--text-primary);
    position: relative;
    padding-bottom: 5px;
}

.app-branding h1::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(to right, var(--highlight-cyan), var(--highlight-magenta));
    border-radius: 2px;
}

.status-indicators {
    display: flex;
    gap: 20px;
    align-items: center;
}

.status-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9rem;
    color: var(--text-secondary);
}

.status-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    border: 1px solid var(--border-color);
    box-shadow: 0 0 5px rgba(0,0,0,0.2);
}

.status-dot.status-ok {
    background-color: limegreen;
    box-shadow: 0 0 8px limegreen;
}

.status-dot.status-error {
    background-color: crimson;
    box-shadow: 0 0 8px crimson;
}

.status-dot.status-unknown {
    background-color: orange;
    box-shadow: 0 0 8px orange;
}

.theme-toggle {
    background: none;
    border: 1px solid var(--border-color);
    padding: 8px 12px;
    border-radius: 50%;
    font-size: 1.2rem;
    cursor: pointer;
    color: var(--text-primary);
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
}

.theme-toggle:hover {
    background-color: rgba(var(--highlight-cyan), 0.1);
    border-color: var(--highlight-cyan);
}

.theme-toggle .icon-light { display: none; }
.theme-toggle .icon-dark { display: block; }

body.theme-light .theme-toggle .icon-light { display: block; }
body.theme-light .theme-toggle .icon-dark { display: none; }

.header-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap; /* Allow wrapping on smaller screens */
    gap: 15px;
}

.main-navigation ul {
    list-style: none;
    display: flex;
    gap: 25px;
}

.main-navigation a {
    color: var(--text-secondary);
    font-weight: bold;
    font-size: 1.1rem;
    padding: 5px 0;
    position: relative;
    transition: color 0.2s ease;
}

.main-navigation a:hover {
    color: var(--text-primary);
}

.main-navigation a.active {
    color: var(--highlight-yellow);
}

.main-navigation a::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    bottom: -5px;
    width: 0;
    height: 3px;
    background: var(--highlight-yellow);
    border-radius: 2px;
    transition: width 0.3s ease;
}

.main-navigation a:hover::after,
.main-navigation a.active::after {
    width: 100%;
}

.customer-selection {
    display: flex;
    align-items: center;
    gap: 10px;
}

.customer-selection .select-wrapper {
    position: relative;
    display: inline-block;
    width: 250px; /* Fixed width for dropdown */
}

.customer-dropdown {
    width: 100%;
    padding-right: 30px; /* Space for dropdown arrow */
    appearance: none; /* Remove default arrow */
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url('data:image/svg+xml;utf8,<svg fill="%23a0a0a0" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 20px;
}

.customer-search-input {
    position: absolute; /* Position search input over the dropdown */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0; /* Hidden by default, JS will reveal */
    pointer-events: none; /* Do not block clicks */
    transition: opacity 0.3s ease;
}

.customer-search-input.active {
    opacity: 1;
    pointer-events: all;
    background-color: var(--bg-secondary); /* Ensure it's visible */
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

.cta-button {
    background: linear-gradient(45deg, var(--highlight-cyan), var(--highlight-magenta));
    color: #fff;
    padding: 10px 25px;
    font-weight: bold;
    box-shadow: 0 5px 15px rgba(var(--highlight-magenta), 0.3);
}

.cta-button:hover {
    background: linear-gradient(45deg, var(--highlight-magenta), var(--highlight-cyan));
    box-shadow: 0 8px 20px rgba(var(--highlight-cyan), 0.4);
}


.dashboard-main-content {
    flex-grow: 1; /* Allows content to take up remaining space */
    padding: 20px 40px;
}

.view-container {
    padding: 20px;
    margin-bottom: 20px;
    background-color: var(--bg-secondary); /* Not glassmorphic here by default, but cards are */
    border-radius: var(--glass-border-radius);
    box-shadow: 0 2px 10px rgba(0,0,0,0.1); /* Subtle shadow for the view container */
    transition: var(--theme-transition);
}

.view-title {
    font-size: 1.8rem;
    color: var(--text-primary);
    margin-bottom: 25px;
    position: relative;
    padding-bottom: 10px;
}

.view-title::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width: 60px;
    height: 4px;
    background: var(--highlight-yellow);
    border-radius: 2px;
}

.cards-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive grid */
    gap: 30px; /* Increased gap for better spacing */
}

/* --- Card Styles --- */
.card {
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border-width) solid var(--border-color);
    border-radius: var(--glass-border-radius);
    box-shadow: 0 4px 30px var(--glass-shadow);
    padding: 25px;
    display: flex;
    flex-direction: column;
    gap: 15px;
    position: relative;
    overflow: hidden; /* Hide any overflow from content, or for glow effects */
    transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(to right, var(--highlight-cyan), var(--highlight-magenta));
    opacity: 0.8;
    border-radius: var(--glass-border-radius) var(--glass-border-radius) 0 0;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 40px var(--glass-shadow), 0 0 20px rgba(var(--highlight-cyan), 0.3); /* Add subtle glow */
}

.card h3 {
    font-size: 1.5rem;
    color: var(--text-primary);
    margin-bottom: 10px;
}

.card p {
    color: var(--text-secondary);
    font-size: 1rem;
}

.error-card {
    background-color: rgba(255, 0, 0, 0.1);
    border: 1px solid crimson;
    color: crimson;
}

.error-card h3 {
    color: crimson;
}
.error-card p {
    color: #ff6347;
}

/* --- Footer Styles --- */
.dashboard-footer {
    padding: 20px 40px;
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.9rem;
    border-top: 1px solid var(--border-color);
    margin-top: 20px;
    background-color: var(--bg-secondary); /* Match header for aesthetic */
    transition: var(--theme-transition);
    border-radius: var(--glass-border-radius) var(--glass-border-radius) 0 0; /* Rounded top, flat bottom */
}


/* --- Debug Panel Styles --- */
#debug-panel {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 350px;
    height: 400px; /* Fixed height for scrollability */
    max-height: 80vh; /* Max height to fit viewport */
    background: var(--glass-bg);
    backdrop-filter: blur(var(--glass-blur));
    border: var(--glass-border-width) solid var(--border-color);
    border-radius: var(--glass-border-radius);
    box-shadow: 0 4px 30px var(--glass-shadow);
    z-index: 9999; /* Always on top */
    display: flex;
    flex-direction: column;
    font-family: 'Cascadia Code', 'Fira Code', 'Lucida Console', monospace; /* Monospace font for logs */
    font-size: 0.85rem;
    color: var(--text-primary);
    transition: var(--theme-transition), transform 0.3s ease;
    overflow: hidden; /* For inner scrollable content */
}

#debug-panel.hidden {
    transform: translateY(calc(100% - 40px)); /* Hide most of it, leave header visible */
}

.debug-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 15px;
    background-color: rgba(0, 0, 0, 0.2); /* Slightly darker header */
    border-bottom: 1px solid var(--border-color);
    border-radius: var(--glass-border-radius) var(--glass-border-radius) 0 0;
    cursor: grab; /* Indicate draggable */
}

.debug-header h3 {
    margin: 0;
    font-size: 1rem;
    color: var(--highlight-yellow);
}

.debug-button {
    background: none;
    border: 1px solid var(--border-color);
    color: var(--text-secondary);
    font-size: 0.9rem;
    padding: 4px 8px;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

.debug-button:hover {
    background-color: rgba(var(--highlight-cyan), 0.1);
    color: var(--highlight-cyan);
    border-color: var(--highlight-cyan);
}

.debug-content {
    flex-grow: 1; /* Take remaining space */
    padding: 10px 15px;
    overflow-y: auto; /* Enable scrolling for log content */
    white-space: pre-wrap; /* Preserve whitespace and wrap text */
    word-wrap: break-word; /* Break long words */
    background-color: rgba(0, 0, 0, 0.1); /* Slightly opaque background for logs */
    border-radius: 0 0 var(--glass-border-radius) var(--glass-border-radius);
}

.debug-log-output {
    margin: 0;
    padding: 0;
    color: var(--text-primary);
    font-size: 0.8em; /* Slightly smaller font for logs */
    line-height: 1.4;
}

/* Specific log level coloring (optional, can be done with JS appending classes) */
.debug-log-output .log-info { color: var(--text-secondary); }
.debug-log-output .log-warning { color: var(--highlight-yellow); }
.debug-log-output .log-error { color: var(--highlight-magenta); }
.debug-log-output .log-debug { color: var(--highlight-cyan); }
.debug-log-output .log-security { color: #ff00ff; } /* Purple for security alerts */

/* Responsive Adjustments */
@media (max-width: 768px) {
    .dashboard-header {
        padding: 15px 20px;
    }

    .header-bottom {
        flex-direction: column;
        align-items: flex-start;
    }

    .main-navigation ul {
        flex-wrap: wrap;
        gap: 15px;
    }

    .customer-selection {
        width: 100%;
        justify-content: center;
        flex-wrap: wrap;
    }

    .customer-selection .select-wrapper {
        width: 100%;
    }

    .dashboard-main-content {
        padding: 15px 20px;
    }

    .cards-grid {
        grid-template-columns: 1fr; /* Stack cards on small screens */
    }

    #debug-panel {
        width: 90%;
        bottom: 10px;
        right: 5%;
        left: 5%;
        max-height: 70vh;
    }
}