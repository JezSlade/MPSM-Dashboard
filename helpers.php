<?php
// helpers.php

// This file no longer needs to require config.php directly as index.php handles its inclusion.

/**
 * Function to render widget content based on its ID.
 * It includes the corresponding widget file from the 'widgets/' directory.
 *
 * @param string $widget_id The unique ID of the widget to render.
 * @return string The HTML content of the widget, or a 'not found' message.
 */
function render_widget($widget_id) {
    // Construct the path to the widget's PHP file
    // __DIR__ ensures the path is relative to the current file (helpers.php)
    $widget_file_path = __DIR__ . '/widgets/' . $widget_id . '.php';

    // Check if the widget file exists before attempting to include it
    if (file_exists($widget_file_path)) {
        // Start output buffering to capture the HTML generated by the widget file
        ob_start();
        // Include the widget's PHP file.
        // Any HTML or PHP output within this file will be captured by ob_start().
        include $widget_file_path;
        // Get the captured content and clean the buffer, then return it.
        return ob_get_clean();
    } else {
        // If the widget file does not exist, return an error message
        // htmlspecialchars() is used for security to prevent XSS.
        return '<div class="widget-content">Widget ' . htmlspecialchars($widget_id) . ' content not found.</div>';
    }
}

// IMPORTANT: The generate_calendar() function has been moved from here
// to widgets/calendar.php to resolve the "Cannot redeclare function" error.
// It should NOT be present in this file anymore.

?>
